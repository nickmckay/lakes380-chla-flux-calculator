output_folder <- "~/Download"
lakes <- c("LakeOporoa_17286.Lakes380.lpd","LakeWiritoa_18934.Lakes380.lpd")
library(readxl)
xl <- read_excel(input_file,sheet = "HSI")
input_file <- "~/Downloads/POROA_LC4U_Data.xlsx"
output_folder <- "~/Downloads"
xl <- read_excel(input_file,sheet = "HSI")
geoChronR::bin
devtools::load_all(".")
xl$`composite dblf (mm)`
range(xl$`composite dblf (mm)`)
range(xl$`composite dblf (mm)`,na.rm = TRUE)
#bin to mm
RABD660670 <- bin(xl$`composite dblf (mm)`,xl$RABD660670,bin.vec = 1:ceiling(max(xl$`composite dblf (mm)`,na.rm = TRUE)))
RABD660670
plot(RABD660670)
#get ages
xl <- read_excel(input_file,sheet = "Chronology")
#get ages
xl_chron <- read_excel(input_file,sheet = "Chronology")
depth_bins <- 1:ceiling(max(xl$`composite dblf (mm)`,na.rm = TRUE))
#bin to mm
RABD660670 <- bin(xl_hsi$`composite dblf (mm)`,
xl_hsi$RABD660670,
bin.vec = depth_bins)
depth_bins <- 1:ceiling(max(xl$`composite dblf (mm)`,na.rm = TRUE))
depth_bins <- 1:ceiling(max(xl_hsi$`composite dblf (mm)`,na.rm = TRUE))
xl_hsi <- read_excel(input_file,sheet = "HSI")
depth_bins <- 1:ceiling(max(xl_hsi$`composite dblf (mm)`,na.rm = TRUE))
#bin to mm
RABD660670 <- bin(xl_hsi$`composite dblf (mm)`,
xl_hsi$RABD660670,
bin.vec = depth_bins)
depth_mid <- RABD660670$x
depth_mid
chronDepths <- xl_chron$ShCal20_t
chronDepths
#get ages
xl_chron <- read_excel(input_file,sheet = "Chronology",skip = 2)
#get ages
xl_chron <- read_excel(input_file,sheet = "Chronology",skip = 1)
xl_chron$CE...1
#get ages
xl_chron_head <- names(read_excel(input_file,
sheet = "Chronology",
skip = 0))
xl_chron_head
xl_chron <- read_excel(input_file,
sheet = "Chronology",
skip = 1)
names(xl_chron) <- xl_chron_head
xl_chron
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,y = xl_chron$ShCal20_t,xout = chronDepths)
chronDepths
chronDepths <- xl_chron$ShCal20_t
xl_chron_head <- names(read_excel(input_file,
sheet = "Chronology",
skip = 0))
xl_chron <- read_excel(input_file,
sheet = "Chronology",
skip = 1)
names(xl_chron) <- xl_chron_head
chronDepths <- xl_chron$ShCal20_t
chronDepths
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,y = xl_chron$ShCal20_t,xout = chronDepths)
agesOnHsiDepths
plot(agesOnHsiDepths,RABD660670$y)
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,y = xl_chron$ShCal20_t,xout = chronDepths)$y
plot(agesOnHsiDepths,RABD660670$y)
chronDepths <- xl_chron$ShCal20_t
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,
y = xl_chron$ShCal20_t,
xout = depth_mid)$y
plot(agesOnHsiDepths,RABD660670$y)
op <- estimate_chla_flux(depth = depth_mid,
time = agesOnHsiDepths,
rabd660670 = RABD660670$y,
smooth = TRUE)
op_plot <- plot_flux(op) + ggtitle("Oporoa from excel")
library(ggplot2)
op_plot <- plot_flux(op) + ggtitle("Oporoa from excel")
op_plot
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,
y = xl_chron$median,
xout = depth_mid)$y
plot(agesOnHsiDepths,RABD660670$y)
agesOnHsiDepths
xl_chron$median
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,
y = 1950-xl_chron$ShCal20_t,
xout = depth_mid)$y
plot(agesOnHsiDepths,RABD660670$y)
op <- estimate_chla_flux(depth = depth_mid,
time = agesOnHsiDepths,
rabd660670 = RABD660670$y,
smooth = TRUE)
op_plot <- plot_flux(op) + ggtitle("Oporoa from excel")
op_plot
library(readxl)
library(ggplot2)
input_file <- "~/Downloads/KAWAU_LC2U_Data.xlsx"
output_folder <- "~/Downloads"
xl_hsi <- read_excel(input_file,sheet = "HSI")
depth_bins <- 1:ceiling(max(xl_hsi$`composite dblf (mm)`,na.rm = TRUE))
#bin to mm
RABD660670 <- bin(xl_hsi$`composite dblf (mm)`,
xl_hsi$RABD660670,
bin.vec = depth_bins)
depth_mid <- RABD660670$x
#get ages
xl_chron_head <- names(read_excel(input_file,
sheet = "Chronology",
skip = 0))
xl_chron <- read_excel(input_file,
sheet = "Chronology",
skip = 1)
names(xl_chron) <- xl_chron_head
chronDepths <- xl_chron$ShCal20_t
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,
y = 1950-xl_chron$ShCal20_t,
xout = depth_mid)$y
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,
y = 1950-xl_chron$ShCal20_t,
xout = depth_mid)$y
depth_mid
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,
y = 1950-xl_chron$ShCal20_t,
xout = depth_mid)$y
xl_chron
xl_chron <- read_excel(input_file,
sheet = "Chronology",
skip = 2)
names(xl_chron) <- xl_chron_head
chronDepths <- xl_chron$ShCal20_t
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,
y = 1950-xl_chron$ShCal20_t,
xout = depth_mid)$y
plot(agesOnHsiDepths,RABD660670$y)
op <- estimate_chla_flux(depth = depth_mid,
time = agesOnHsiDepths,
rabd660670 = RABD660670$y,
smooth = TRUE)
op_plot <- plot_flux(op) + ggtitle("Oporoa from excel")
op_data <- chla_flux_to_tibble(op)
op_plot
op_plot <- plot_flux(op) + ggtitle("Oporoa from excel") + xlim(c(0,2020))
op_plot
input_file <- "~/Downloads/POROA_LC4U_Data.xlsx"
output_folder <- "~/Downloads"
xl_hsi <- read_excel(input_file,sheet = "HSI")
depth_bins <- 1:ceiling(max(xl_hsi$`composite dblf (mm)`,na.rm = TRUE))
#bin to mm
RABD660670 <- bin(xl_hsi$`composite dblf (mm)`,
xl_hsi$RABD660670,
bin.vec = depth_bins)
depth_mid <- RABD660670$x
#get ages
xl_chron_head <- names(read_excel(input_file,
sheet = "Chronology",
skip = 0))
xl_chron <- read_excel(input_file,
sheet = "Chronology",
skip = 1)
names(xl_chron) <- xl_chron_head
chronDepths <- xl_chron$ShCal20_t
agesOnHsiDepths <- Hmisc::approxExtrap(x = xl_chron$`z (dblf)`,
y = 1950-xl_chron$ShCal20_t,
xout = depth_mid)$y
plot(agesOnHsiDepths,RABD660670$y)
op <- estimate_chla_flux(depth = depth_mid,
time = agesOnHsiDepths,
rabd660670 = RABD660670$y,
smooth = TRUE)
op_plot <- plot_flux(op) + ggtitle("Oporoa from excel") + xlim(c(0,2020))
op_plot
source("~/GitHub/lakes380-chla-flux-calculator/R/scratchExcel.R", echo=TRUE)
source("~/GitHub/lakes380-chla-flux-calculator/R/scratchExcel.R", echo=TRUE)
source("~/GitHub/lakes380-chla-flux-calculator/scratchExcel.R", echo=TRUE)
agesOnHsiDepths
xl_chron
View(xl_chron)
range(xl_chron$`z (dblf)`)
source("~/GitHub/lakes380-chla-flux-calculator/scratchExcel.R", echo=TRUE)
source("~/GitHub/lakes380-chla-flux-calculator/scratchExcel.R", echo=TRUE)
